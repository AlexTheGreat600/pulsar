#!/bin/sh

# Check if a directory was provided
if [ -z "$1" ]; then
    echo "Usage: $0 /path/to/directory"
    exit 1
fi

TARGET_DIR="$1"

# Check if it is a valid directory
if [ ! -d "$TARGET_DIR" ]; then
    echo "Error: '$TARGET_DIR' is not a valid directory."
    exit 1
fi

# 1. find: Look only for files (-type f)
# 2. shuf: Randomize the list and pick the top 1 (-n 1)
# 3. xargs: Pass the path to xdg-open
SELECTED_FILE=$(find "$TARGET_DIR" -maxdepth 1 -type f | shuf -n 1)

# Check if a file was actually found (directory might be empty)
if [ -n "$SELECTED_FILE" ]; then
    echo "Opening: $SELECTED_FILE"
    xdg-open "$SELECTED_FILE"
else
    echo "No files found in $TARGET_DIR"
fi
